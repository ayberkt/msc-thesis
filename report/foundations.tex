\chapter{Foundations}\label{chap:foundations}

In this chapter, we provide the preliminary lemmas of \UF{} for the sake of
self-containment. It is intended to be a summary rather than an introduction.

\section{Homotopy levels}

One of the most interesting observations that arise from associating type theory with
homotopy theory is that we can classify types with respect to the non-trivial homotopy
structure they bear. A space containing no nontrivial homotopy above dimension $n$ is
called a homotopy $n$-type (or said to be of homotopy level $n$).

The hierarchy of homotopy levels starts with that of \emph{contractible} ones.
\begin{defn}[Contractible]
  A type $A$ is called contractible if it has exactly one inhabitant:
  \begin{equation*}
    \iscontr{A} \quad\is\quad \sigmaty{c}{A}{\pity{y}{A}{c =_A y}}.
  \end{equation*}
\end{defn}

We then recursively define a predicate expressing that a given type has homotopy level
$n$. The idea is that we increase the dimension by one at each step.
\begin{defn}[Homotopy level]
  We will say that the homotopy level of a type $A$ is $\oftyI{n}{\mathbb{N}}$ if
  \begin{align*}
    \isofhlevel{A}{\zero{}} &\quad\is\quad \iscontr{A}\\
    \isofhlevel{A}{\suc{n}} &\quad\is\quad \pity{x~y}{A}{\isofhlevel{x =_A y}{n}}.
  \end{align*}
\end{defn}

\section{Propositions}

The homotopy level of one is of special interest: it is the class of types that are like
propositions in the sense that their own proof structure is trivial: they are inhabited by
at most one term.

\begin{defn}[Proposition]
  A type $A$ is a proposition (sometimes disambiguated as \emph{h-proposition}) if it has
  a homotopy level of one:
  \begin{equation*}
    \isprop{A} \quad\is\quad \isofhlevel{A}{1}.
  \end{equation*}
\end{defn}

We will be collecting the class of propositional types in the following type of $\Omega$.

\begin{defn}[$\Omega$]
  $\Omega_n$ is the type of all types at universe $n$ that are propositional.
  \begin{equation*}
    \sigmaty{A}{\univ{}_n}{\isprop{A}}.
  \end{equation*}
\end{defn}

When asserting that a proposition $\oftyI{A}{\Omega_n}$ is inhabited, we have to technically
project out the first component. We will engage in the excusable notational abuse of
denoting this projection by $A$ itself.

Once we introduce this delineation of the class of propositional types, we have to make
sure that types that we view as \emph{properties} of structures are actually propositional
types. This is usually easy to do, that is, most types that are expected to behave like
propositions behave naturally like propositions, so it suffices to prove this fact.
However, there are cases when they actually \emph{are not} propositional. A substantial
component of the work presented in this thesis is devoted to the problem of ensuring
certain types behave propositionally as we will explain later.

Now, let us state some simple facts about the class of propositional types.

\begin{prop}\label{thm:pi-prop}
  Given $\oftyI{A}{\univ{}_m}$, $\oftyI{B}{A \rightarrow \univ{}_n}$, the type $\pity{x}{A}{B(x)}$
  is a proposition when every $B(x)$ is a proposition for every $\oftyI{x}{A}$.
\end{prop}
\begin{proof}
  Let $\oftyI{A}{\univ{}_m}$, $\oftyI{B}{A \rightarrow \univ{}_n}$ and assume that $B(x)$ is a
  proposition for every $\oftyI{x}{A}$. Let $\oftyII{f}{g}{\pity{x}{A}{B(x)}}$. By
  function extensionality, it suffices to show that $f(x) = g(x)$ for every
  $\oftyI{x}{A}$. Let $\oftyI{x}{A}$. $f(x) = g(x)$ is given directly by the fact that
  $B(x)$ is propositional.
\end{proof}

\begin{prop}[Propositionality is propositional]
  Given $\oftyI{A}{\univ{}_n}$, the type $\isprop{A}$ is propositional.
\end{prop}

As we view propositional types as embodying logical propositions, it is natural to
expect that the right notion of equivalence between them is logical equivalence.

\begin{defn}\label{defn:iff}
  Types $\oftyI{A}{\univ{}_m}$ and $\oftyI{B}{\univ{}_m}$ are logically equivalent
  (denoted $\logequiv{A}{B}$) iff there exists functions both ways:
  \begin{equation*}
    A \leftrightarrow B \quad\is\quad (A \rightarrow B) \times (B \rightarrow A).
  \end{equation*}
\end{defn}

Indeed, it turns out that in \UF{}, it is sufficient to show logical equivalence to
establish equivalence between propositional types. We provide this result in
Proposition~\ref{prop:iff-equiv} after we present the general notion of type equivalence.

\section{Sets}

The other homotopy class of interest is the class of types whose proof structure is not
trivial, in that there may be distinct terms that inhabit it, but the proof structure of
the type of equality proofs between these terms is trivial. In other words, inhabitants of
a set are equal to each other in \emph{at most one way}.

\begin{defn}[Set]\label{defn:hset}
  A type $A$ is a set if its homotopy level is two:
  \begin{equation*}
    \isset{A} \quad\is\quad \isofhlevel{A}{2}.
  \end{equation*}
\end{defn}

A highly useful sufficient condition of setness was given by Michael Hedberg in
1998~\cite{hedberg}: every type with decidable equality is a set.

First, let us note that we can express the decidability of a type as follows.
\begin{defn}[Decidability]
  A type $A$ is decidable if it is either provable of refutable:
  \begin{equation*}
    \isdec{A} \quad\is\quad A + \neg A.
  \end{equation*}
\end{defn}

A type $A$ for which the identity type is decidable for every two inhabitants is called
\emph{discrete}.
\begin{defn}[Discrete]
  \begin{equation*}
    \isdisc{A} \quad\is\quad \pity{x~y}{A}{\isdec{x =_A y}}
  \end{equation*}
\end{defn}

Hedberg can then be stated simply as follows.
\begin{thm}[Hedberg]\label{thm:hedberg}
  \begin{equation*}
    \pity{A}{\univ{}_n}{\isdisc{A} \rightarrow \isset{A}}
  \end{equation*}
\end{thm}

\section{Equivalence of types}

\begin{defn}[Fiber]
  Given types $\oftyI{A}{\univ{}_m}$, $\oftyI{B}{\univ{}_n}$, a function
  $f : A \rightarrow B$, and some $\oftyI{y}{B}$, the fiber of $f$ is the type of all inhabitants
  of $A$ that are mapped by $f$ to $y$:
  \begin{equation*}
    \fiber{f}{y} \quad\is\quad \sigmaty{x}{A}{f(x) =_B y}.
  \end{equation*}
\end{defn}

The following definition of type equivalence was first formulated by Voevodsky.

\begin{defn}[Type equivalence]
  Given types $\oftyI{A}{\univ{}_m}$, $\oftyI{B}{\univ{}_n}$, a function $f : A \rightarrow B$ is an
  \emph{equivalence} if $\fiber{f}{y}$ is a contractible type for every $\oftyI{y}{B}$:
  \begin{equation*}
    \isequiv{f} \quad\is\quad \pity{y}{B}{\iscontr{\fiber{f}{y}}}.
  \end{equation*}
\end{defn}

We will collect the type of type equivalences in the following type.

\begin{defn}
  Let $\oftyI{A}{\univ{}_m}$, $\oftyI{B}{\univ{}_n}$.
  \begin{equation*}
    A \simeq B \quad\is\quad \sigmaty{f}{A \rightarrow B}{\isequiv{f}}
  \end{equation*}
\end{defn}

\begin{prop}[Equivalences are invertible]
  Given types $\oftyI{A}{\univ{}_m}$, $\oftyI{B}{\univ{}_n}$, if a function $f : A \rightarrow B$
  is an equivalence then it has an inverse.
\end{prop}

\begin{prop}\label{prop:iff-equiv}
  Given propositions $\oftyI{P}{\univ{}_m}$, $\oftyI{Q}{\univ{}_n}$, if $\logequiv{P}{Q}$
  then $\typequiv{A}{B}$.
\end{prop}

\section{Higher Inductive Types (HITs)}

In addition to univalence, Univalent Foundations augments type theory with the means to
add paths and higher paths into an inductively defined type.
