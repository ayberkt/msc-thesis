\chapter{Introduction}\label{chap:intro}

This thesis is about topology, the branch of mathematics that studies \emph{continuous}
functions. The notion of a continuous function pervades practically all of mathematics as
pointed out by Sylvester~\cite[pg.~27]{armstrong-topology}: ``if I were asked to name, in
one word, the pole star round which the mathematical firmament revolves, the central idea
which pervades the whole corpus of mathematical doctrine, I should point to Continuity as
contained in our notions of space, and say, it is this, it is this!''. Let us then start
by considering the question of what continuity is.

A continuous function, in the context of real numbers, is a function for which ``small
changes to the input result in small changes to the output''. This is formally expressed
in the following ``$\epsilon$-$\delta$'' definition of continuity: a function $f : \reals{} \rightarrow
\reals{}$ is
\emph{continuous} if
\begin{equation*}\label{eq:cont-0}
  \forall x \in \reals{}.~ \forall \epsilon > 0.~ \exists \delta > 0.~ \forall y \in \reals{}.~
    | x - y | < \delta \rightarrow | f(x) - f(y) | < \epsilon.
\end{equation*}
This definition embodies the idea that, to make $f(x)$ closer than $\epsilon$ to
$f(y)$, it suffices to make $x$ closer than $\delta$ to $y$, for some certain $\delta$.

To pinpoint the essence of continuity, we will consider it in general form. $\reals{}$ is
just one instance of a \emph{metric space}, a set that admits a well-behaved notion of
distance, its distance function being:
\begin{alignat*}{2}
  d       \quad&:\quad  && \reals{} \times \reals{} \rightarrow \reals{} \\
  d(x, y) \quad&:=\quad && | x - y |                      .
\end{alignat*}
This is just \emph{one} instance of a notion of distance on a set that is viewed as a set
of points. We can speak of the continuity of a function between any two metric spaces. Let
$X$ and $Y$ be two metric spaces. We now define continuity for any function $f : X \rightarrow Y$:
\begin{equation}\label{cont-1}
  \forall x \in X.~ \forall \epsilon > 0.~ \exists \delta > 0.~ \forall y \in X.~ d_X(x, y) < \delta \rightarrow d_Y(f(x), f(y)) < \epsilon.
\end{equation}

Notice that we could have written (\ref{cont-1}) in an alternative way. Given some $x \in X,
\epsilon \in \reals{}$ define
\begin{equation*}
  \ball{x}{\epsilon} \quad\is\quad \setof{ y \in X ~|~ d(x, y) < \epsilon }.
\end{equation*}
Now, the following is the same as (\ref{cont-1}):
\begin{equation*}
  \forall x \in X.~ \forall \epsilon > 0.~ \exists \delta > 0.~ \forall y \in X.~ y \in \ball{x}{\delta} \rightarrow f(y) \in \ball{f(x)}{\epsilon},
\end{equation*}
which could be expressed even more compactly as:
\begin{equation}\label{cont-2}
  \forall x \in X.~ \forall \epsilon > 0.~ \exists \delta > 0.~ f(\ball{x}{\delta}) \subseteq \ball{f(x)}{\epsilon}.
\end{equation}

After having written down continuity in this more compact way, we consider the question:
what is the meaning of $\ball{x}{\epsilon}$? Given some $x \in X$, $\ball{x}{\epsilon}$ expresses the set
of points that are closer than $\epsilon$ to $x$. One intuitive reading of this is: $\ball{x}{\epsilon}$
denotes the set of approximations of $x$ with a degree of accuracy of $\epsilon$. As $\epsilon$
decreases, the accuracy with which $\ball{x}{\epsilon}$ represents $x$ increases. This situation
is familiar from \emph{experimental} sciences: even though we might not be able to pin
down an exact value $v$ (i.e., with $\epsilon \equiv 0$), we can approximate $v$ by conducting more
accurate experiments, hence narrowing the value down to a $\ball{v}{\epsilon}$.

To see continuity in its full generality, we now notice that the notion of distance is not
crucial to what is expressed in (\ref{cont-2}). We have made use of the distance function
just to be able to specify the approximation sets. Instead, we can work directly with a
specification of what the approximation sets are. This is the main idea underlying
topology: instead of working with a notion of distance, we work directly with a
specification of the approximations.

The definition of a metric space ensures that the distance function is well-behaved. When
one defines approximation sets in terms of such a distance function, they will be
guaranteed to satisfy one's expectations from approximation sets. As we want to completely
remove our dependency on a notion of distance, we will have to axiomatise the behaviour of
approximation sets themselves instead.

Any approximation set for a real number must contain that real number itself. In other
words, we want approximations to give us ``error bars'' around some result and any notion
of error bar that does not encircle the result is clearly not what we are looking for.

\paragraphsummary{Axiomatisation of basis(2).}
Furthermore, if we have two approximation sets for a real number, say $A_0$ and $A_1$,
that real number must lie in $A_0 \cap A_1$. We can then pick out a \emph{finer}, more
accurate approximation $A_2$ for the number such that $A_2 \subseteq A_1 \cap A_2$. For instance,
$A_0$ might say that some $v$ lies within $3.0$ and $3.2$ and $A_1$ that it lies within
$3.1$ and $3.5$ from which we can tell that it lies within $3.1$ and $3.2$. This will be
our second requirement.

\paragraphsummary{Formal defn.~ of basis.}
The standard term in topology for such a class of sets is a \emph{basis for a topology}.
We now summarise it precisely in the following definition.
\begin{defn}[Basis for a topology]
  Given a set $X$, a basis for a topology on $X$ is a class $\mathcal{B}$ of subsets of
  $X$ such that:
  \begin{enumerate}
    \item $\forall x \in X.~ \exists B \in \mathcal{B}.~x \in B$, which intuitively says ``approximations do
      approximate'', and
    \item $\forall x \in X.~ \exists B_0, B_1 \in \mathcal{B}.~ x \in B_0 \cap B_1 \rightarrow \exists B_2 \subseteq (B_0 \cap B_1).~
      x \in B_2$, which says ``approximations can be combined''.
  \end{enumerate}
\end{defn}

\paragraphsummary{Continuity with bases.}
Now, we can reformulate continuity in a more general way using basis elements. Given sets
$X, Y$ with bases $\mathcal{B}_X, \mathcal{B}_Y$, a function $f : X \rightarrow Y$ is continuous if
\begin{equation}\label{cont-basis}
  \forall x \in X.~ \forall V \in \mathcal{B}_Y.~ f(x) \in V \rightarrow \exists U \in \mathcal{B}_X.~
    f(U) \subseteq V.
\end{equation}
This says exactly the same thing as (\ref{cont-2}), but talking directly about some given
approximation sets rather than defining these through a notion of distance. In other
words, we previously said that a function is continuous if we can make $f(x)$ closer than
$\epsilon$ to $f(y)$ by making $x$ closer than $\delta$ to $y$. We are now saying that for every
set approximating some $f(x)$, there is a set approximating $x$ such that the image of
the latter is contained in the former, which corresponds directly to (\ref{cont-2}).

Given a basis $\mathcal{B}$ on set $X$, we say that the topology generated by
$\mathcal{B}$, that we call $\mathbf{T}_{\mathcal{B}}$, is the class of all possible
unions of $\mathcal{B}$. The idea here is that an element $U$ of
$\mathbf{T}_{\mathcal{B}}$ is like a property of the set that we are interested in
\emph{verifying}. To verify $U$, it suffices to show that it falls in one of the basis
elements that constitute $U$ and since all of these are approximation sets, $U$ can be
verified from a finite amount of data since approximations suffice to express it.

In reality, it is often the case that we deal directly with the bases that generate
topologies. However, we will not have reached full generality until we can talk about
\emph{topologies} directly i.e., properties of a set which can be verified via
approximations. We will call such properties finitely verifiable or \emph{observable}. The
topological term is ``open set'' in the sense that the set does not contain its own
boundary.

If we have two finitely verifiable properties, there should be some approximation sets
approximations of degrees of accuracy of $ε₀$ and $ε₁$. Then, we can verify both by taking
the higher between them so we can verify their intersection. If we have an arbitrary
number of finitely verifiable properties, to verify the union it suffices to verify at
least one, so if a point is in this set it must be in one of the finitely verifiable
subsets, meaning the set itself is finitely verifiable. This brings us to the following
definition of a topological space.
\begin{defn}[Topological space]\label{defn:topospace}
  A topology on a set $X$ is a class $\mathcal{T}$ of subsets of $X$ such that
  \begin{itemize}
    \item The trivial subsets $X, \emptyset \subseteq X$ are in $\mathcal{T}$,
    \item $\mathcal{T}$ is closed under finite intersections, and
    \item $\mathcal{T}$ is closed under arbitrary unions.
  \end{itemize}
\end{defn}

By this definition, we start with a set $X$ of \emph{points} on which we are interested in
making observations. The topology we attach to $X$ specifies these observable sets. In
\emph{pointless topology}~\cite{johnstone-the-point}, we start with a primitive set of
opens instead, and we study these directly. In other words, we reverse the conceptual
order of open sets being notions derived from points: we view points as being derived from
opens instead. What is remarkable is that we can go a long way without mentioning the
points.

So how do we define open sets not as sets of points? We simply axiomatise the behaviour of
the lattice of open sets. Let $\mathcal{O}$ be a set of opens.
\begin{enumerate}
  \item Corresponding to the set-inclusion partial order in the pointful case, we require
    that there be a partial order $\_\sqsubseteq\_ \subseteq \mathcal{O} \times \mathcal{O}$.
  \item Corresponding to the fact that open sets are closed under finite intersection, we
    require that there be a binary meet operation $\meet{\_}{\_} : \mathcal{O} \times
    \mathcal{O} \rightarrow \mathcal{O}$ and a nullary one $\top : \mathcal{O}$.
  \item Corresponding to the fact that open sets are closed under arbitary union, we
    require that there be a join operation of arbitrary arity: $\joinnm{}\_ :
    \mathcal{P}(\mathcal{O}) \rightarrow \mathcal{O}$.
\end{enumerate}
In addition to these, we have to require that these operations satisfy an infinite
distributivity law, on which we will elaborate in Chapter~\ref{chap:frames}. The official
name for such a lattice that embodies a logic of observable or finitely verifiable
properties is \emph{frame}~\cite{vickers}. Indeed, frames form a category whose morphisms
are frame homomorphisms. Objects of the opposite category are called \emph{locales}.
Therefore, frames and locales are synonymous
\emph{as long as no mentions to morphisms are made}~\cite{vickers, stone-spaces}

A natural question is then: what do we gain by studying topology in a pointless way? In
this thesis, we will look at topology from the perspective of computer science therefore
we would like to be able to understand theorems of topology in computational terms.
Topology notoriously relies on classical reasoning in many of its fundamental theorems
such as the Tychonoff theorem. By doing topology pointlessly, we can avoid classical
reasoning and hence gain a computational understanding of it---most saliently of such
important theorems such as Tychonoff~\cite{coq-tychonoff}. This point was put eloquently
by Johnstone~\cite[pg.~46]{stone-spaces}:
\begin{quote}
  It is here that the real point of pointless topology begins to emerge; the difference
  between locales and spaces is one that we can (usually) afford to ignore if we are
  working in a ``classical'' universe with the axiom of choice available, but when (or if)
  we work in a context where choice principles are not allowed, then we have to take
  account of the difference—and usually it is locales, not spaces, which provide the right
  context in which to do topology. This is the point which, as I mentioned earlier,
  Andr\'{e} Joyal began to hammer home in the early 1970s; I can well remember how, at the
  time, his insistence that locales were the real stuff of topology, and spaces were
  merely figments of the classical mathematician's imagination, seemed (to me, and I
  suspect to others) like unmotivated fanaticism. I have learned better since then.
\end{quote}

We will investigate topology as can be carried out in type theory in this thesis. The
first prerequisite for this is that we be able to develop topology constructively, that
is, without relying on classical principles. As pointed out by Johnstone, pointless
topology can help us here as it allows us to understand topology in constructive terms.
The goal of carrying out topology in type theory, however, presents further challenges: we
have to understand topology not only constructively but also \emph{predicatively}.

This is the subject matter of the branch of mathematics known as formal topology, first
instigated by Martin-Löf and Sambin~\cite{int-formal-spaces} in the early days of type
theory. The idea is that a formal topology recasts a frame into a form that resembles a
formal proof system. In addition to enabling the importation of proof-theoretical ideas,
such a formal presentation has the virtue of \emph{predicative} hence enabling the
development of frames in type theory.

In this thesis, we present a development of formal topology in univalent type
theory~\cite{hottbook}. By now, it has become clear that univalence addresses certain
severe shortcomings of type theory. The question of what novelties it presents for formal
topology is therefore a natural one. In attempting to answer this question, we follow a
particular approach to formal topology, implementing an idea of Coquand~\cite{coq-posets}
to define formal topologies as posets endowed with ``interaction''
structures~\cite{tree-sets, hancock-interaction-systems}.

This thesis is structured as follows. In Chapter~\ref{chap:foundations}, we summarise the
fundamentals of univalent type theory. In Chapter~\ref{chap:frames}, we present our
development of frames and constructs related to them. In Chapter~\ref{chap:formal-topo},
we present our main development of formal topology in univalent type theory. In
Chapter~\ref{chap:cantor}, we present a prime example of a formal topology: the Cantor
space. As a proof of concept for the formal study of topological properties in univalent
type theory, we prove an important property of the Cantor space, namely, that it is
compact.
